!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("lodash/isNumber"),require("lodash/isString"),require("log4js-helper")):"function"==typeof define&&define.amd?define(["exports","lodash/isNumber","lodash/isString","log4js-helper"],t):t(e.storage4js=e.storage4js||{},e.isNumber,e.isString,e.Logger)}(this,function(e,t,o,r){"use strict";function a(e,t){if(!e)throw new Error(""+t)}function n(e){return null==e}function s(e){a(!n(e),"[LocalStorage] key不能为空"),a(o(e),"[LocalStorage] key必须为string")}function i(e,o,i){s(e),n(o)&&r.warn("[LocalStorage] value为null或undefined");var l=i||0;a(t(l),"[LocalStorage] expire必须是number");var u={value:o,expireTime:l>0?Date.now()+l:null};r.debug("[LocalStorage] save","key: "+e,u),localStorage.setItem(e,JSON.stringify(u))}function l(e){s(e);var t=localStorage.getItem(e)||"{}",o={};try{o=JSON.parse(t)}catch(e){r.warn("[LocalStorage] 存储的值无法解析")}var a=o.value,i=o.expireTime;return n(i)||i>=Date.now()?a:(r.debug("key为"+e+"的值超时删除"),void localStorage.removeItem(e))}function u(e){s(e),localStorage.removeItem(e)}function g(){localStorage.clear()}function c(e){a(!n(e),"[SessionStorage] key不能为空"),a(o(e),"[SessionStorage] key必须为string")}function S(e,t){c(e),n(t)&&r.warn("[SessionStorage] value为null或undefined");var o={value:t};r.debug("[SessionStorage] save","key: "+e,o),sessionStorage.setItem(e,JSON.stringify(o))}function f(e){c(e);var t=sessionStorage.getItem(e)||"{}",o={};try{o=JSON.parse(t)}catch(e){r.warn("[SessionStorage] 存储的值无法解析")}var a=o.value;return a}function d(e){c(e),sessionStorage.removeItem(e)}function m(){sessionStorage.clear()}t="default"in t?t.default:t,o="default"in o?o.default:o,r="default"in r?r.default:r;var v={setItem:i,getItem:l,removeItem:u,clear:g},p={setItem:S,getItem:f,removeItem:d,clear:m};r.setLevel("production"===process.env.NODE_ENV?r.WARN:r.DEBUG);var y={localStorage:v,sessionStorage:p};e.localStorage=v,e.sessionStorage=p,e.default=y,Object.defineProperty(e,"__esModule",{value:!0})});
