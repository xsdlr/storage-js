!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("lodash/isNumber"),require("lodash/isString"),require("log4js-helper")):"function"==typeof define&&define.amd?define(["exports","lodash/isNumber","lodash/isString","log4js-helper"],t):t(e.storage4js=e.storage4js||{},e.isNumber,e.isString,e.Logger)}(this,function(e,t,r,o){"use strict";function a(e,t){if(!e)throw new Error(""+t)}function n(e){return null==e}function s(e){a(!n(e),"[LocalStorage] require key"),a(r(e),"[LocalStorage] key must be a string")}function i(e,r,i){s(e),n(r)&&o.warn("[LocalStorage] value is null or undefined");var u=i||0;a(t(u),"[LocalStorage] expire must be a number");var l={value:r,expireTime:u>0?Date.now()+u:null};o.debug("[LocalStorage] save","key: "+e,l),localStorage.setItem(e,JSON.stringify(l))}function u(e){s(e);var t=localStorage.getItem(e)||"{}",r={};try{r=JSON.parse(t)}catch(e){o.warn("[LocalStorage] store value can't be parsed")}var a=r.value,i=r.expireTime;return n(i)||i>=Date.now()?a:(o.debug("remove expire value, key is "+e),void localStorage.removeItem(e))}function l(e){s(e),localStorage.removeItem(e)}function g(){localStorage.clear()}function c(e){a(!n(e),"[SessionStorage] require key"),a(r(e),"[SessionStorage] key must be a string")}function S(e,t){c(e),n(t)&&o.warn("[SessionStorage] value is null or undefined");var r={value:t};o.debug("[SessionStorage] save","key: "+e,r),sessionStorage.setItem(e,JSON.stringify(r))}function f(e){c(e);var t=sessionStorage.getItem(e)||"{}",r={};try{r=JSON.parse(t)}catch(e){o.warn("[SessionStorage] store value can't be parsed")}var a=r.value;return a}function d(e){c(e),sessionStorage.removeItem(e)}function m(){sessionStorage.clear()}t="default"in t?t.default:t,r="default"in r?r.default:r,o="default"in o?o.default:o;var v={setItem:i,getItem:u,removeItem:l,clear:g},p={setItem:S,getItem:f,removeItem:d,clear:m},y={localStorage:v,sessionStorage:p};e.localStorage=v,e.sessionStorage=p,e.default=y,Object.defineProperty(e,"__esModule",{value:!0})});
