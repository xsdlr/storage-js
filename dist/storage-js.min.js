!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e["storage-js"]=e["storage-js"]||{})}(this,function(e){"use strict";function t(e){var t=w.call(e,L),o=e[L];try{e[L]=void 0;var n=!0}catch(e){}var r=N.call(e);return n&&(t?e[L]=o:delete e[L]),r}function o(e){return R.call(e)}function n(e){return null==e?void 0===e?E:k:x&&x in Object(e)?t(e):o(e)}function r(e){return null!=e&&"object"==typeof e}function i(e){return"number"==typeof e||r(e)&&n(e)==D}function l(e){return"string"==typeof e||!_(e)&&r(e)&&n(e)==U}function a(e,t){if(!e)throw new Error(""+t)}function s(e){return null==e}function c(e){a(!s(e),"[LocalStorage] key不能为空"),a(l(e),"[LocalStorage] key必须为string")}function u(e,t,o){c(e),s(t)&&G.warn("[LocalStorage] value为null或undefined");var n=o||0;a(i(n),"[LocalStorage] expire必须是number");var r={value:t,expireTime:n>0?Date.now()+n:null};G.debug("[LocalStorage] save","key: "+e,r),localStorage.setItem(e,JSON.stringify(r))}function f(e){c(e);var t=localStorage.getItem(e)||"{}",o={};try{o=JSON.parse(t)}catch(e){G.warn("[LocalStorage] 存储的值无法解析")}var n=o,r=n.value,i=n.expireTime;return s(i)||i>=Date.now()?r:(G.debug("key为"+e+"的值超时删除"),void localStorage.removeItem(e))}function g(e){c(e),localStorage.removeItem(e)}function v(){localStorage.clear()}function S(e){a(!s(e),"[SessionStorage] key不能为空"),a(l(e),"[SessionStorage] key必须为string")}function y(e,t){S(e),s(t)&&G.warn("[SessionStorage] value为null或undefined");var o={value:t};G.debug("[SessionStorage] save","key: "+e,o),sessionStorage.setItem(e,JSON.stringify(o))}function p(e){S(e);var t=sessionStorage.getItem(e)||"{}",o={};try{o=JSON.parse(t)}catch(e){G.warn("[SessionStorage] 存储的值无法解析")}var n=o,r=n.value;return r}function b(e){S(e),sessionStorage.removeItem(e)}function h(){sessionStorage.clear()}var d="object"==typeof global&&global&&global.Object===Object&&global,m="object"==typeof self&&self&&self.Object===Object&&self,O=d||m||Function("return this")(),j=O.Symbol,I=Object.prototype,w=I.hasOwnProperty,N=I.toString,L=j?j.toStringTag:void 0,F=Object.prototype,R=F.toString,k="[object Null]",E="[object Undefined]",x=j?j.toStringTag:void 0,D="[object Number]",_=Array.isArray,U="[object String]";let A=null;class B{constructor(){return A||(A=this),this.DEBUG={level:0,type:"debug"},this.INFO={level:1,type:"info"},this.WARN={level:2,type:"warn"},this.ERROR={level:3,type:"error"},this.OFF={level:10,type:"off"},this.logLevel=this.DEBUG,A}setLevel(e){this.logLevel=Object.assign({},this.DEBUG,e)}debug(...e){this._log(this.DEBUG,e)}info(...e){this._log(this.INFO,e)}warn(...e){this._log(this.WARN,e)}error(...e){this._log(this.ERROR,e)}_log(e=this.OFF,t){const o=e.type;if(e.level>=this.logLevel.level){const e=console[o];"function"==typeof e&&Function.apply.apply(e,[console,t])}}}var G=new B,J={setItem:u,getItem:f,removeItem:g,clear:v},T={setItem:y,getItem:p,removeItem:b,clear:h},P={localStorage:J,sessionStorage:T};e.localStorage=J,e.sessionStorage=T,e.default=P,Object.defineProperty(e,"__esModule",{value:!0})});
