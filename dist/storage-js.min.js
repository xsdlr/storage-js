!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e["storage-js"]=e["storage-js"]||{})}(this,function(e){"use strict";function t(e){var t=k.call(e,w),o=e[w];try{e[w]=void 0;var r=!0}catch(e){}var n=N.call(e);return r&&(t?e[w]=o:delete e[w]),n}function o(e){return E.call(e)}function r(e){return null==e?void 0===e?R:A:D&&D in Object(e)?t(e):o(e)}function n(e){return null!=e&&"object"==typeof e}function l(e){return"number"==typeof e||n(e)&&r(e)==F}function a(e){return"string"==typeof e||!_(e)&&n(e)&&r(e)==x}function i(e,t){if(!e)throw new Error(""+t)}function s(e){return null==e}function c(e){i(!s(e),"[LocalStorage] key不能为空"),i(a(e),"[LocalStorage] key必须为string")}function u(e,t,o){c(e),s(t)&&G.warn("[LocalStorage] value为null或undefined");var r=o||0;i(l(r),"[LocalStorage] expire必须是number");var n={value:t,expireTime:r>0?Date.now()+r:null};G.debug("[LocalStorage] save","key: "+e,n),localStorage.setItem(e,JSON.stringify(n))}function g(e){c(e);var t=localStorage.getItem(e)||"{}",o={};try{o=JSON.parse(t)}catch(e){G.warn("[LocalStorage] 存储的值无法解析")}var r=o,n=r.value,l=r.expireTime;return s(l)||l>=Date.now()?n:(G.debug("key为"+e+"的值超时删除"),void localStorage.removeItem(e))}function f(e){c(e),localStorage.removeItem(e)}function v(){localStorage.clear()}function y(e){i(!s(e),"[SessionStorage] key不能为空"),i(a(e),"[SessionStorage] key必须为string")}function S(e,t){y(e),s(t)&&G.warn("[SessionStorage] value为null或undefined");var o={value:t};G.debug("[SessionStorage] save","key: "+e,o),sessionStorage.setItem(e,JSON.stringify(o))}function p(e){y(e);var t=sessionStorage.getItem(e)||"{}",o={};try{o=JSON.parse(t)}catch(e){G.warn("[SessionStorage] 存储的值无法解析")}var r=o,n=r.value;return n}function b(e){y(e),sessionStorage.removeItem(e)}function h(){sessionStorage.clear()}var d="object"==typeof global&&global&&global.Object===Object&&global,m="object"==typeof self&&self&&self.Object===Object&&self,O=d||m||Function("return this")(),j=O.Symbol,I=Object.prototype,k=I.hasOwnProperty,N=I.toString,w=j?j.toStringTag:void 0,L=Object.prototype,E=L.toString,A="[object Null]",R="[object Undefined]",D=j?j.toStringTag:void 0,F="[object Number]",_=Array.isArray,x="[object String]",U=null,B=function(){function e(){return babelHelpers.classCallCheck(this,e),U||(U=this),this.DEBUG={level:0,type:"debug"},this.INFO={level:1,type:"info"},this.WARN={level:2,type:"warn"},this.ERROR={level:3,type:"error"},this.OFF={level:10,type:"off"},this.logLevel=this.DEBUG,U}return babelHelpers.createClass(e,[{key:"setLevel",value:function(e){this.logLevel=Object.assign({},this.DEBUG,e)}},{key:"debug",value:function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];this._log(this.DEBUG,t)}},{key:"info",value:function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];this._log(this.INFO,t)}},{key:"warn",value:function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];this._log(this.WARN,t)}},{key:"error",value:function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];this._log(this.ERROR,t)}},{key:"_log",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.OFF,t=arguments[1],o=e.type;if(e.level>=this.logLevel.level){var r=console[o];"function"==typeof r&&Function.apply.apply(r,[console,t])}}}]),e}(),G=new B,J={setItem:u,getItem:g,removeItem:f,clear:v},T={setItem:S,getItem:p,removeItem:b,clear:h};G.setLevel("production"===process.env.NODE_ENV?G.WARN:G.DEBUG);var C={localStorage:J,sessionStorage:T};e.localStorage=J,e.sessionStorage=T,e.default=C,Object.defineProperty(e,"__esModule",{value:!0})});
